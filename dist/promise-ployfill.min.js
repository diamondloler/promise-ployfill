"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t(e):!e.Promise&&(e.Promise=t(e))}("undefined"!=typeof global?global:"undefined"!=typeof window?window:void 0,function(e){var f=function(e){return"function"==typeof e},c="object"===("undefined"==typeof process?"undefined":_typeof(process))&&null!==process&&"function"==typeof process.nextTick&&process.nextTick||"function"==typeof setImmediate&&setImmediate||setTimeout,l=function r(e){var o;this.speciality.modelCount++,this.then=function(e,t){if(f(e)||f(t)){var n={onResolve:e||null,onReject:t||null};this.deferreds.push(n),this.speciality.isThenAble=!0}return new r};var t=function(t,n,o){return function(e){if(e instanceof r)throw new Error("the value of "+t+" should not construtor itself");e&&c(function(){o.speciality.isThenAble&&f(n)&&n.call(o,e)})}},i=function(e){return 0==e.length?{}:e.shift()},n=t("resolve",function(e){var t,n=i(this.deferreds);o=n.onResolve&&n.onResolve(e),this.speciality.isThenAble=(t=o)&&t instanceof r||!1||this.speciality.staticMode},this),s=t("reject",function(e){var t=i(this.deferreds);t.onReject&&t.onReject(e),this.speciality.isThenAble=!1},this);e&&e.call(null,n,s)};return l.prototype.deferreds=[],l.prototype.speciality={isThenAble:!1,modelCount:0,results:[],staticMode:!1},l.all=function(o){if(!o||!Array.isArray(o)||0==o.length)throw new TypeError("The 1st arguments must be array that has more than one element");var r=this.prototype,i=r.deferreds,e=r.speciality,s=e.results,f=null;e.staticMode=!0;var u=function(e){e&&s.push(e)};return new l(function(n){c(function(){f=i.shift(),function t(){var e=o.shift();if(void 0!==e)if(e instanceof l)e.then(function(e){u(e),t()},function(e){u(e),r.deferreds=[f],f=null,n(s)});else{if("function"==typeof e)throw new TypeError("The array member should not a function");u(e),t()}else f&&(i.push(f),n(s))}()})})},l.race=function(e){if(!e||!Array.isArray(e)||0==e.length)throw new TypeError("The 1st arguments must be array that has more than one element");var r,i=0,s=!1,f=this.prototype,u=f.deferreds;return f.speciality.staticMode=!0,new l(function(n,o){c(function(){for(var t=u.shift();r=e[i++];){if(!(r instanceof l))throw new TypeError("The 1st argument â€™s content  must be instance of _promise");r.then(function(e){s||(f.deferreds=[t],n(e),s=!0)},function(e){s||(f.deferreds=[t],o(e),s=!0)})}})})},l});
//# sourceMappingURL=promise-ployfill.min.js.map
