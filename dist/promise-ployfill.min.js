!function(n,e){"object"==typeof module?module.exports=e(n):"function"==typeof define&&define.amd?define(function(){return e(n)}):e(n)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(n){var d=function(n){return"function"==typeof n},p="object"==typeof process&&"function"==typeof process.nextTick&&process.nextTick||"function"==typeof setImmediate&&setImmediate||setTimeout,v=function(n){return n&&n instanceof y},t=Object.prototype.toString;var y=function(t){var e=!1,o=!1,r=!1,i=[];this.then=function(n,e){if(!d(n)&&!d(e))throw new Error('the arguments of "promise.then" can\'t be empty');return i.push({onResolve:n||null,onReject:e||null}),r=!0,t&&t.call(null,s,h),this};var f,c,n=function(e,t){return function(n){if(n instanceof y)throw new Error("the value of "+e+" should not construtor itself");n&&p(function(){r&&d(t)&&t.call(null,n)})}},u=function(n){return 0==n.length?{}:n.shift()},l=function(n){s(n)},a=function(n){h(n)},s=n("resolve",function(n){if(i.length){if(o)throw Error("can't not call resolve, promise is already rejected");c=u(i),f=c.onResolve&&c.onResolve(n),r=e=!0,v(f)?f.then(l,a):s()}}),h=n("reject",function(n){if(e)throw Error("can't not call reject, promise is already fulfilled");(c=u(i)).onReject&&c.onReject(n),r=!(o=!0)})};return y.all=function(r){if(Array.isArray(r)){for(var n,t,i=[],e=r.length,o=e,f=!1,c=function(n){l(n,this)},u=function(n){l(n,this,!0)},l=function(n,e,t){if(!f){var o=function(n,e){for(var t=0;t<n.length;t++)if(n[t]==e)return t;return!1}(r,e);if(!1!==o)i[o]=n,a.apply(null,t?[i,!0]:[i])}};e--;)if(n=r[e],v(n))n.then(c.bind(n),u.bind(n));else{if(d(n))continue;i[e]=n,a(i)}return new y(function(n){t=n})}function a(n,e){o--,!e&&o||(t(n),f=!0)}},y.resolve=function(e){return n=e,"[object Object]"===t.call(n)&&"function"==typeof e.then?new y(e.then):v(e)?e:new y(function(n){n(e||"fulfilled")});var n},y.reject=function(t){return new y(function(n,e){e(t||"rejected")})},y.next=function(){var r=[].slice.call(arguments);!function e(n,t){if(n)return console.warn(n);if(r.length){var o=r.shift();if(d(o))try{void 0!==t?o.call(null,e,t):o.call(null,e)}catch(n){e(n)}}}()},y.race=function(n){if(Array.isArray(n)){for(var e,t,o=n.length,r=function(n){e(n)};o--;)t=n[o],v(t)&&t.then(r,r);return new y(function(n){e=n})}},n.Promise||(n.Promise=y)});
//# sourceMappingURL=promise-ployfill.min.js.map
